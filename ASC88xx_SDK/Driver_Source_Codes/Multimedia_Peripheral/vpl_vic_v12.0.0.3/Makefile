################################################
# Generated by Code Generator Version 4.2.0.6 #
################################################
DEBUG = n
PROFILE = n
LAST_FRAME = n
ENABLE_CALIBRATION = n

MODULE		:= vpl_vic.ko
HEADERFILE	:= vpl_vic.h vpl_vic_locals.h

AUTOEXPOSURE_DIR = ../AutoExposure_v6.0.0.3
AUTOFOCUS_DIR = ../autofocus_v3.0.0.1
AUTOWHITEBALANCE_DIR = ../AutoWhiteBalance_v3.0.0.1

# You normally should not need to change the following
ifeq ($(DEBUG),y)
	EXTRA_CFLAGS += -O -g -D_DEBUG
else
	EXTRA_CFLAGS += -O2 -DNO_DP -DNDEBUG
endif

ifeq ($(PROFILE),y)
	EXTRA_CFLAGS += -O -D__USE_PROFILE__
else
	EXTRA_CFLAGS += -O2 -DNO_DP -DNDEBUG
endif

ifeq ($(LAST_FRAME),y)
	EXTRA_CFLAGS += -O -D__USE_LAST_FRAME__
else
	EXTRA_CFLAGS += -O2 -DNO_DP -DNDEBUG
endif

ifeq ($(ENABLE_CALIBRATION),y)
	EXTRA_CFLAGS += -O -D__VIC_ENABLE_CALIBRATION__
else
	EXTRA_CFLAGS += -O2 -DNO_DP -DNDEBUG
endif

ifneq ($(KERNELRELEASE),)
	ifeq ($(findstring .., $(AUTOEXPOSURE_DIR)),)
		AE_ROOTLOOT = $(AUTOEXPOSURE_DIR)
	else
		AE_ROOTLOOT = $(PWD)/$(AUTOEXPOSURE_DIR)
	endif
	EXTRA_CFLAGS += -I$(AE_ROOTLOOT)

	ifeq ($(findstring .., $(AUTOFOCUS_DIR)),)
		AF_ROOTLOOT = $(AUTOFOCUS_DIR)
	else
		AF_ROOTLOOT = $(PWD)/$(AUTOFOCUS_DIR)
	endif
	EXTRA_CFLAGS += -I$(AF_ROOTLOOT)

	ifeq ($(findstring .., $(AUTOWHITEBALANCE_DIR)),)
		AWB_ROOTLOOT = $(AUTOWHITEBALANCE_DIR)
	else
		AWB_ROOTLOOT = $(PWD)/$(AUTOWHITEBALANCE_DIR)
	endif
	EXTRA_CFLAGS += -I$(AWB_ROOTLOOT)	

	obj-m := vpl_vic.o

else

	PWD := $(shell pwd)
	KERNELDIR := $(KERNELSRC)

default:
	$(MAKE) -C $(KERNELDIR) M=$(PWD) modules

clean:
	@ rm -rf *.o *.ko .*.cmd *.mod.c .tmp_versions *.order *symvers

endif
